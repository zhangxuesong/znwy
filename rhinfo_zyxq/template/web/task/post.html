{template 'web/_layer_header'}
{template 'web/_navtitle1'}

<div class="panel panel-default" style="padding-top:30px;" >
    <div class="panel-body">    
		{template 'web/'.$mydo.'/form'}	
    </div>
</div>

{template 'web/_layer_footer'}
{template 'web/_bottom'}

<script type="text/javascript">
var rewardtype = "{$item['rewardtype']}";
var tasktype = "{$item['tasktype']}";
var redcate = "{$item['redcate']}";
	 
if (rewardtype == '3'){	   
   $("#rewardtype1").hide();
   $("#rewardtype2").hide();
   $("#rewardtype3").show();
}
else if(rewardtype == '2'){
   $("#rewardtype1").hide();
   $("#rewardtype2").show();
   $("#rewardtype3").hide();
}
else {
   $("#rewardtype1").show();
   $("#rewardtype2").hide();
   $("#rewardtype3").hide();
}
 
 $("input[name=rewardtype]").click(function(){	
	  switch($("input[name=rewardtype]:checked").attr("id")){
	  case "reward1":	
		    $("#rewardtype1").show();
		   $("#rewardtype2").hide();
		   $("#rewardtype3").hide();
		   break;
	  case "reward2":			
		    $("#rewardtype1").hide();
		   $("#rewardtype2").show();
		   $("#rewardtype3").hide();
		   break;	
      case "reward3":			
		  $("#rewardtype1").hide();
		   $("#rewardtype2").hide();
		   $("#rewardtype3").show();
		   break;			   
	  default:
	   break;
	}		
 });
 
 if (redcate == '2'){	   
   $("#redcate1").hide();
   $("#redcate2").show();
}
else {
   $("#redcate1").show();
   $("#redcate2").hide();
}
 
 $("input[name=redcate]").click(function(){	
	  switch($("input[name=redcate]:checked").attr("id")){
	  case "category1":	
		     $("#redcate1").show();
			 $("#redcate2").hide();
		   break;
	  case "category2":			
		   $("#redcate1").hide();
			$("#redcate2").show();
		   break;		
	  default:
	   break;
	}		
 });

if (tasktype == '2'){	   
   $("#bindweixin").hide();
}
else {
  $("#bindweixin").show();
}
 
 $("input[name=tasktype]").click(function(){	
	  switch($("input[name=tasktype]:checked").attr("id")){
	  case "tasktype1":	
		    $("#bindweixin").show();
		   break;
	  case "tasktype2":			
		  $("#bindweixin").hide();
		   break;		
	  default:
	   break;
	}		
 });

function mysubmit(obj){
	var id = $.trim($("#id").val());
	var title = $.trim($("#title").val());
	var amount = $.trim($("#amount").val());
	var minamount = $.trim($("#minamount").val());
	var maxamount = $.trim($("#maxamount").val());	
	var redcate = $("input[name=redcate]:checked").val();
	var rewardtype = $("input[name=rewardtype]:checked").val();
	var credit1 = $.trim($("#credit1").val());
	var credit2 = $.trim($("#credit2").val());
	
	if (title=='') {
	   layer.msg("任务主题不能为空！",{icon:0});
	   return;
	}
	if(rewardtype=='1'){
	   if (credit1=='' || credit1<1) {
		   layer.msg("积分必须大于1！",{icon:0});
		   return;
		}	
	}
	if(rewardtype=='2'){
		 if (credit2=='' || credit2<=0) {
		   layer.msg("余额必须大于0！",{icon:0});
		   return;
		}	
	}
	if(rewardtype=='3'){
		if (redcate=='1'){
			if (amount=='' || amount==0) {
			   layer.msg("红包金额不能为空！",{icon:0});
			   return;
			}	
		}
		else if(redcate=='2'){
			if (minamount=='' || minamount==0) {
			   layer.msg("红包金额最小值不能为空！",{icon:0});
			   return;
			}
			if (maxamount=='' || maxamount==0) {
			   layer.msg("红包金额最大值不能为空！",{icon:0});
			   return;
			}	
		}
	}
	myprocess(obj);
	$("#myform").submit();
	
}

function myreturn(){
	 window.history.back();
}

</script> 

</body>
</html>